{% extends 'base.html' %}

{% block content %}
    <style>
    button {
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        background-color: #ffffff;
        box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.2);
        color: rgb(0, 0, 0);
        cursor: pointer;
        text-align: center;
        margin: 10px;
    }

    menu {
        display: flex;
        flex-direction: row;
    }

    .centered-container {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }
    </style>
    <body>
        <div class="centered-container">
            <div id="menu">
                <h1>Admin</h1>
                <button id="start-servo-calibration">Start Servo Calibration</button>
                <button>Set Food Dispense Angle</button>
                <button>Set Food Retrieve Angle</button>
            </div>
        </div>
    </body>

    <script>
        document.getElementById('start-servo-calibration').addEventListener('click', function() {
            fetch('/start_servo_calibration', {
                method: 'POST'
            })
            .then(response => response.json())
            .then(data => {
                console.log('Servo calibration started at angle:', data.angle);
            });

            document.addEventListener('keydown', function(event) {
                if (event.key === 'ArrowUp' || event.key === 'ArrowDown') {
                    const direction = event.key === 'ArrowUp' ? 'up' : 'down';
                    fetch('/update_servo_angle', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ direction: direction })
                    })
                    .then(response => response.json())
                    .then(data => {
                        console.log('Servo angle updated:', data.angle);
                    });
                }
            });
        });
    </script>
{% endblock %}
